

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Grunt &mdash; ASP.NET 0.0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css?v=1" type="text/css" />
  

  
    <link rel="top" title="ASP.NET 0.0.1 documentation" href="../index.html"/>
        <link rel="up" title="Client-Side Development" href="index.html"/>
        <link rel="next" title="Manage Client-Side Packages with Bower" href="bower.html"/>
        <link rel="prev" title="Using Gulp" href="using-gulp.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ASP.NET
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conceptual-overview/index.html">Conceptual Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dnx/index.html">.NET Execution Environment (DNX)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frameworks/index.html">Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publishing/index.html">Publishing and Deployment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Client-Side Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="using-gulp.html">Using Gulp</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Using Grunt</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bower.html">Manage Client-Side Packages with Bower</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootstrap.html">Building Beautiful, Responsive Sites with Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="knockout.html">Knockout.js MVVM Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="angular.html">Using Angular for Single Page Applications (SPAs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="less-sass-fa.html">Styling Applications with Less, Sass, and Font Awesome</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundling-and-minification.html">|stub-icon| Bundling and Minification</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdn.html">|stub-icon| Working with a Content Delivery Network (CDN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="responsive-design.html">|stub-icon| Responsive Design for the Mobile Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="typescript.html">|stub-icon| Introducing TypeScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="yeoman.html">Building Projects with Yeoman</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/index.html">Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ASP.NET</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Client-Side Development</a> &raquo;</li>
      
    <li>Using Grunt</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/client-side/using-grunt.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
  <div class="section" id="using-grunt">
<h1>Using Grunt<a class="headerlink" href="#using-grunt" title="Permalink to this headline">¶</a></h1>
<p>By <a class="reference external" href="http://blog.falafel.com/author/noel-rice/">Noel Rice</a></p>
<p>Grunt is a JavaScript task runner that automates script minification, TypeScript compilation, code quality &#8220;lint&#8221; tools, CSS pre-processors, and just about any repetitive chore that needs doing to support client development. Grunt is fully supported in Visual Studio 2015, though the ASP.NET project templates use Gulp by default (see <a class="reference internal" href="using-gulp.html"><em>Using Gulp</em></a>).</p>
<dl class="docutils">
<dt>In this article:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#preparing-the-application">Preparing the application</a></li>
<li><a class="reference internal" href="#configuring-npm">Configuring NPM</a></li>
<li><a class="reference internal" href="#configuring-grunt">Configuring Grunt</a></li>
<li><a class="reference internal" href="#watching-for-changes">Watching for changes</a></li>
<li><a class="reference internal" href="#binding-to-visual-studio-events">Binding to Visual Studio events</a></li>
</ul>
</dd>
</dl>
<p>This example uses the Empty ASP.NET 5 project template as its starting point, to show how to automate the client build process from scratch.</p>
<p>The finished example cleans the target deployment directory, combines JavaScript files, checks code quality, condenses JavaScript file content and deploys to the root of your web application. We will use the following packages:</p>
<ul class="simple">
<li><strong>grunt</strong>: The Grunt task runner package.</li>
<li><strong>grunt-contrib-clean</strong>: A task that removes files or directories.</li>
<li><strong>grunt-contrib-jshint</strong>: A task that reviews JavaScript code quality.</li>
<li><strong>grunt-contrib-concat</strong>: A task that joins files into a single file.</li>
<li><strong>grunt-contrib-uglify</strong>: A task that minifies JavaScript to reduce size.</li>
<li><strong>grunt-contrib-watch</strong>: A task that watches file activity.</li>
</ul>
<div class="section" id="preparing-the-application">
<h2>Preparing the application<a class="headerlink" href="#preparing-the-application" title="Permalink to this headline">¶</a></h2>
<p>To begin, set up a new empty web application and add TypeScript example files. TypeScript files are automatically compiled into JavaScript using default Visual Studio 2015 settings and will be our raw material to process using Grunt.</p>
<ol class="arabic simple">
<li>In Visual Studio 2015, create a new <code class="docutils literal"><span class="pre">ASP.NET</span> <span class="pre">Web</span> <span class="pre">Application</span></code>.</li>
<li>In the <strong>New ASP.NET Project</strong> dialog, select the <strong>ASP.NET 5 Empty</strong> template and click the OK button.</li>
<li>In the Solution Explorer, review the project structure. The <code class="docutils literal"><span class="pre">\src</span></code> folder includes empty <code class="docutils literal"><span class="pre">wwwroot</span></code> and <code class="docutils literal"><span class="pre">Dependencies</span></code> nodes.</li>
</ol>
<img alt="../_images/grunt-solution-explorer.png" src="../_images/grunt-solution-explorer.png" />
<ol class="arabic simple" start="4">
<li>Add a new folder named <code class="docutils literal"><span class="pre">TypeScript</span></code> to your project directory.</li>
<li>Before adding any files, let’s make sure that Visual Studio 2015 has the option &#8216;compile on save&#8217; for TypeScript files checked. <em>Tools &gt; Options &gt; Text Editor &gt; Typescript &gt; Project</em></li>
</ol>
<img alt="../_images/typescript-options.png" src="../_images/typescript-options.png" />
<p>6.      Right-click the <code class="docutils literal"><span class="pre">TypeScript</span></code> directory and select <strong>Add &gt; New Item</strong> from the context menu. Select the <strong>JavaScript file</strong> item and name the file <strong>Tastes.ts</strong> (note the *.ts extension). Copy the line of TypeScript code below into the file (when you save, a new Tastes.js file will appear with the JavaScript source).
enum Tastes { Sweet, Sour, Salty, Bitter }</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kr">enum</span> <span class="nx">Tastes</span> <span class="p">{</span> <span class="nx">Sweet</span><span class="p">,</span> <span class="nx">Sour</span><span class="p">,</span> <span class="nx">Salty</span><span class="p">,</span> <span class="nx">Bitter</span> <span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Add a second file to the <strong>TypeScript</strong> directory and name it <code class="docutils literal"><span class="pre">Food.ts</span></code>. Copy the code below into the file.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kr">class</span> <span class="nx">Food</span> <span class="p">{</span>
        <span class="nx">constructor</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">calories</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_calories</span> <span class="o">=</span> <span class="nx">calories</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kr">private</span> <span class="nx">_name</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
        <span class="nx">get</span> <span class="nx">Name</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kr">private</span> <span class="nx">_calories</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
        <span class="nx">get</span> <span class="nx">Calories</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_calories</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kr">private</span> <span class="nx">_taste</span><span class="o">:</span> <span class="nx">Tastes</span><span class="p">;</span>
        <span class="nx">get</span> <span class="nx">Taste</span><span class="p">()</span><span class="o">:</span> <span class="nx">Tastes</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_taste</span> <span class="p">}</span>
        <span class="nx">set</span> <span class="nx">Taste</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">Tastes</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_taste</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-npm">
<h2>Configuring NPM<a class="headerlink" href="#configuring-npm" title="Permalink to this headline">¶</a></h2>
<p>Next, configure NPM to download grunt and grunt-tasks.</p>
<ol class="arabic simple">
<li>In the Solution Explorer, right-click the project and select <strong>Add &gt; New Item</strong> from the context menu. Select the <strong>NPM configuration file</strong> item, leave the default name, <code class="docutils literal"><span class="pre">package.json</span></code>, and click the <strong>Add</strong> button.</li>
<li>In the package.json file, inside the <code class="docutils literal"><span class="pre">devDependencies</span></code> object braces, enter &#8220;grunt&#8221;. Select <code class="docutils literal"><span class="pre">grunt</span></code> from the Intellisense list and press the Enter key. Visual Studio will quote the grunt package name, and add a colon. To the right of the colon, select the latest stable version of the package from the top of the Intellisense list (press <code class="docutils literal"><span class="pre">Ctrl-Space</span></code> if Intellisense does not appear).</li>
</ol>
<img alt="../_images/devdependencies-grunt.png" src="../_images/devdependencies-grunt.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">NPM uses <a class="reference external" href="http://semver.org/">semantic versioning</a> to organize dependencies. Semantic versioning, also known as SemVer, identifies packages with the numbering scheme &lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;. Intellisense simplifies semantic versioning by showing only a few common choices. The top item in the Intellisense list (0.4.5 in the example above) is considered the latest stable version of the package. The carat ^ symbol matches the most recent major version and the tilde ~ matches the most recent minor version. See the <a class="reference external" href="https://www.npmjs.com/package/semver">NPM semver version parser reference</a> as a guide to the full expressivity that SemVer provides.</p>
</div>
<ol class="arabic simple" start="3">
<li>Add more dependencies to load grunt-contrib* packages for <em>clean, jshint, concat, uglify and watch</em> as shown in the example below. The versions do not need to match the example.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;grunt&quot;</span><span class="o">:</span> <span class="s2">&quot;0.4.5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;grunt-contrib-clean&quot;</span><span class="o">:</span> <span class="s2">&quot;0.6.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;grunt-contrib-jshint&quot;</span><span class="o">:</span> <span class="s2">&quot;0.11.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;grunt-contrib-concat&quot;</span><span class="o">:</span> <span class="s2">&quot;0.5.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;grunt-contrib-uglify&quot;</span><span class="o">:</span> <span class="s2">&quot;0.8.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;grunt-contrib-watch&quot;</span><span class="o">:</span> <span class="s2">&quot;0.6.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Save the <code class="docutils literal"><span class="pre">package.json</span></code> file.</li>
</ol>
<p>The packages for each devDependencies item will download, along with any files that each package requires. You can find the package files in the <code class="docutils literal"><span class="pre">node_modules</span></code> directory by enabling the <strong>Show All Files</strong> button in the Solution Explorer.</p>
<img alt="../_images/node-modules.png" src="../_images/node-modules.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you need to, you can manually restore dependencies in Solution Explorer by right-clicking on <code class="docutils literal"><span class="pre">Dependencies\\NPM</span></code> and selecting the <strong>Restore Packages</strong> menu option.</p>
</div>
<img alt="../_images/restore-packages.png" src="../_images/restore-packages.png" />
<div class="section" id="configuring-grunt">
<h3>Configuring Grunt<a class="headerlink" href="#configuring-grunt" title="Permalink to this headline">¶</a></h3>
<p>Grunt is configured using a manifest named <code class="docutils literal"><span class="pre">Gruntfile.js</span></code> that defines, loads and registers tasks that can be run manually or configured to run automatically based on events in Visual Studio.</p>
<ol class="arabic simple">
<li>Right-click the project and select <strong>Add &gt; New Item</strong>. Select the <strong>Grunt Configuration file</strong> option, leave the default name, <code class="docutils literal"><span class="pre">Gruntfile.js</span></code>, and click the <strong>Add</strong> button.</li>
</ol>
<p>The initial code includes a module definition and the <code class="docutils literal"><span class="pre">grunt.initConfig()</span></code> method. The <code class="docutils literal"><span class="pre">initConfig()</span></code> is used to set options for each package, and the remainder of the module will load and register tasks.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
        <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Inside the <code class="docutils literal"><span class="pre">initConfig()</span></code> method, add options for the <code class="docutils literal"><span class="pre">clean</span></code> task as shown in the example Gruntfile.js below. The clean task accepts an array of directory strings. This task removes files from wwwroot/lib and removes the entire /temp directory.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
                <span class="nx">clean</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;wwwroot/lib/*&quot;</span><span class="p">,</span> <span class="s2">&quot;temp/&quot;</span><span class="p">],</span>
        <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Below the initConfig() method, add a call to <code class="docutils literal"><span class="pre">grunt.loadNpmTasks()</span></code>. This will make the task runnable from Visual Studio.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s2">&quot;grunt-contrib-clean&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Save Gruntfile.js. The file should look something like the screenshot below.</li>
</ol>
<img alt="../_images/gruntfile-js-initial.png" src="../_images/gruntfile-js-initial.png" />
<ol class="arabic simple" start="5">
<li>Right-click Gruntfile.js and select <strong>Task Runner Explorer</strong> from the context menu. The Task Runner Explorer window will open.</li>
</ol>
<img alt="../_images/task-runner-explorer-menu.png" src="../_images/task-runner-explorer-menu.png" />
<ol class="arabic simple" start="6">
<li>Verify that <code class="docutils literal"><span class="pre">clean</span></code> shows under <strong>Tasks</strong> in the Task Runner Explorer.</li>
</ol>
<img alt="../_images/task-runner-explorer-tasks.png" src="../_images/task-runner-explorer-tasks.png" />
<ol class="arabic simple" start="7">
<li>Right-click the clean task and select <strong>Run</strong> from the context menu. A command window displays progress of the task.</li>
</ol>
<img alt="../_images/task-runner-explorer-run-clean.png" src="../_images/task-runner-explorer-run-clean.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are no files or directories to clean yet. If you like, you can manually create them in the Solution Explorer and then run the clean task as a test.</p>
</div>
<ol class="arabic simple" start="8">
<li>In the initConfig() method, add an entry for <code class="docutils literal"><span class="pre">concat</span></code> using the code below.</li>
</ol>
<p>The <code class="docutils literal"><span class="pre">src</span></code> property array lists files to combine, in the order that they should be combined. The <code class="docutils literal"><span class="pre">dest</span></code> property assigns the path to the combined file that is produced.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">concat</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">all</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;TypeScript/Tastes.js&#39;</span><span class="p">,</span> <span class="s1">&#39;TypeScript/Food.js&#39;</span><span class="p">],</span>
                <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;temp/combined.js&#39;</span>
        <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">all</span></code> property in the code above is the name of a target. Targets are used in some Grunt tasks to allow multiple build environments. You can view the built-in targets using Intellisense or assign your own.</p>
</div>
<ol class="arabic simple" start="9">
<li>Add the <code class="docutils literal"><span class="pre">jshint</span></code> task using the code below.</li>
</ol>
<p>The jshint code-quality utility is run against every JavaScript file found in the temp directory.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">jshint</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;temp/*.js&#39;</span><span class="p">],</span>
        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">&#39;-W069&#39;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The option &#8220;-W069&#8221; is an error produced by jshint when JavaScript uses bracket syntax to assign a property instead of dot notation, i.e. <code class="docutils literal"><span class="pre">Tastes[&quot;Sweet&quot;]</span></code> instead of <code class="docutils literal"><span class="pre">Tastes.Sweet</span></code>. The option turns off the warning to allow the rest of the process to continue.</p>
</div>
<ol class="arabic simple" start="10">
<li>Add the <code class="docutils literal"><span class="pre">uglify</span></code> task using the code below.</li>
</ol>
<p>The task minifies the combined.js file found in the temp directory and creates the result file in wwwroot/lib following the standard naming convention &lt;file name&gt;.min.js.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">uglify</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">all</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;temp/combined.js&#39;</span><span class="p">],</span>
                <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;wwwroot/lib/combined.min.js&#39;</span>
        <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li>Under the call grunt.loadNpmTasks() that loads grunt-contrib-clean, include the same call for jshint, concat and uglify using the code below.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-jshint&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-concat&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-uglify&#39;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="12">
<li>Save <code class="docutils literal"><span class="pre">Gruntfile.js</span></code>. The file should look something like the example below.</li>
</ol>
<img alt="../_images/gruntfile-js-complete.png" src="../_images/gruntfile-js-complete.png" />
<ol class="arabic simple" start="13">
<li>Notice that the Task Runner Explorer Tasks list includes <code class="docutils literal"><span class="pre">clean</span></code>, <code class="docutils literal"><span class="pre">concat</span></code>, <code class="docutils literal"><span class="pre">jshint</span></code> and <code class="docutils literal"><span class="pre">uglify</span></code> tasks. Run each task in order and observe the results in Solution Explorer. Each task should run without errors.</li>
</ol>
<img alt="../_images/task-runner-explorer-run-each-task.png" src="../_images/task-runner-explorer-run-each-task.png" />
<p>The concat task creates a new combined.js file and places it into the temp directory. The jshint task simply runs and doesn’t produce output. The uglify task creates a new combined.min.js file and places it into wwwroot/lib. On completion, the solution should look something like the screenshot below:</p>
<img alt="../_images/solution-explorer-after-all-tasks.png" src="../_images/solution-explorer-after-all-tasks.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information on the options for each package, visit <a class="reference external" href="https://www.npmjs.com/">https://www.npmjs.com/</a> and lookup the package name in the search box on the main page. For example, you can look up the grunt-contrib-clean package to get a documentation link that explains all of its parameters.</p>
</div>
</div>
<div class="section" id="all-together-now">
<h3>All Together Now<a class="headerlink" href="#all-together-now" title="Permalink to this headline">¶</a></h3>
<p>Use the Grunt <code class="docutils literal"><span class="pre">registerTask()</span></code> method to run a series of tasks in a particular sequence. For example, to run the example steps above in the order clean -&gt; concat -&gt; jshint -&gt; uglify, add the code below to the module. The code should be added to the same level as the loadNpmTasks() calls, outside initConfig.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;clean&#39;</span><span class="p">,</span> <span class="s1">&#39;concat&#39;</span><span class="p">,</span> <span class="s1">&#39;jshint&#39;</span><span class="p">,</span> <span class="s1">&#39;uglify&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>The new task shows up in Task Runner Explorer under Alias Tasks. You can right-click and run it just as you would other tasks. The <code class="docutils literal"><span class="pre">all</span></code> task will run <code class="docutils literal"><span class="pre">clean</span></code>, <code class="docutils literal"><span class="pre">concat</span></code>, <code class="docutils literal"><span class="pre">jshint</span></code> and <code class="docutils literal"><span class="pre">uglify</span></code>, in order.</p>
<img alt="../_images/alias-tasks.png" src="../_images/alias-tasks.png" />
</div>
</div>
<div class="section" id="watching-for-changes">
<h2>Watching for changes<a class="headerlink" href="#watching-for-changes" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal"><span class="pre">watch</span></code> task keeps an eye on files and directories. The watch triggers tasks automatically if it detects changes. Add the code below to initConfig to watch for changes to *.js files in the TypeScript directory. If a JavaScript file is changed, <code class="docutils literal"><span class="pre">watch</span></code> will run the <code class="docutils literal"><span class="pre">all</span></code> task.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;TypeScript/*.js&quot;</span><span class="p">],</span>
        <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add a call to <code class="docutils literal"><span class="pre">loadNpmTasks()</span></code> to show the <code class="docutils literal"><span class="pre">watch</span></code> task in Task Runner Explorer.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-watch&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Right-click the watch task in Task Runner Explorer and select Run from the context menu. The command window that shows the watch task running will display a waiting… message. Open one of the TypeScript files, add a space, and then save the file. This will trigger the watch task and trigger the other tasks to run in order. The screenshot below shows a sample run.</p>
<img alt="../_images/watch-running.png" src="../_images/watch-running.png" />
</div>
<div class="section" id="binding-to-visual-studio-events">
<h2>Binding to Visual Studio Events<a class="headerlink" href="#binding-to-visual-studio-events" title="Permalink to this headline">¶</a></h2>
<p>Unless you want to manually start your tasks every time you work in Visual Studio, you can bind tasks to <strong>Before Build</strong>, <strong>After Build</strong>, <strong>Clean</strong>, and <strong>Project Open</strong> events.</p>
<p>Let’s bind <code class="docutils literal"><span class="pre">watch</span></code> so that it runs every time Visual Studio opens. In Task Runner Explorer, right-click the watch task and select <strong>Bindings &gt; Project Open</strong> from the context menu.</p>
<img alt="../_images/bindings-project-open.png" src="../_images/bindings-project-open.png" />
<p>Unload and reload the project. When the project loads again, the watch task will start running automatically.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Grunt is a powerful task runner that can be used to automate most client-build tasks. Grunt leverages NPM to deliver its packages, and features tooling integration with Visual Studio 2015. Visual Studio&#8217;s Task Runner Explorer detects changes to configuration files and provides a convenient interface to run tasks, view running tasks, and bind tasks to Visual Studio events.</p>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="using-gulp.html"><em>Using Gulp</em></a></li>
</ul>
</div></blockquote>
</div>
</div>



  <!-- Helpfulness -->
  <div id="helpful-position"></div>
  <div id="helpful" class="helpfulness-container fixed" style="display:none;">
    <div class="helpfulness">
      <div class="helpfulness-form">
        <h2>Was this page helpful?</h2>
        <span>Your feedback about this content is important. Let us know what you think.</span>
        <a id="helpfulness-btn-yes" href="javascript:;" class="common-btn first">Yes</a>
        <a id="helpfulness-btn-no" href="javascript:;" class="common-btn">No</a>
      </div>
      <div class="helpfulness-form-no" style="display:none;">
        <h2>Was this page helpful?</h2>
        Sorry this wasn't helpful.
        <input type="text" id="txt-helpfulness" placeholder="Please let us know why this wasn't helpful">
        <span id="helpfulness-characters-left">characters remaining</span>
        <a id="helpfulness-btn-submit" href="javascript:;" class="common-btn">Submit</a>
        <a id="helpfulness-btn-skip" href="javascript:;" class="common-btn secondary">Skip this</a>
      </div>
      <a href="javascript:;" class="helpfulness-close">✖</a>
      <div class="messages processing" style="display:none;">
        Sending feedback...
      </div>
      <div class="messages success" style="display:none;">
        Thank you for your feedback!
      </div>
      <div class="messages error" style="display:none;">
        Error during submission!
      </div>
    </div>
  </div>

  <!-- wedc -->
  <noscript>
    <img alt="" width="1" height="1" src="https://c.microsoft.com/trans_pixel.aspx"/>
  </noscript>

  
  <!-- disqus commenting disabled; set disqus_shortname -->
  
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bower.html" class="btn btn-neutral float-right" title="Manage Client-Side Packages with Bower" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="using-gulp.html" class="btn btn-neutral" title="Using Gulp" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Microsoft.
      Last updated on Nov 12, 2015.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>